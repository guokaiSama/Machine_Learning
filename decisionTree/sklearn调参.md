# 简介
&emsp;&emsp;scikit-learn决策树算法类库内部的实现是使用了调优过的CART树算法，既可以做分类，又可以做回归。分类决策树的类对应的是DecisionTreeClassifier，而回归决策树的类对应的是DecisionTreeRegressor。两者的参数定义几乎完全相同，但是意义不全相同。
# 参数说明   
前两个参数有区别，后几个无差别    

---

1、criterion:特征选择标准  
&emsp;&emsp;对于决策树，默认使用gini，可选择entropy    
&emsp;&emsp;对于回归树，默认使用mse，即均方差。可选mae，即均值之差。mse比mae更加精确

2、class_weight：类别权重   
&emsp;&emsp;对于决策树，class_weight是指定样本各类别的的权重，主要是为了防止训练集某些类别的样本过多，导致训练的决策树过于偏向这些类别。这里可以自己指定各个样本的权重，或者用“balanced”，如果使用“balanced”，则算法会自己计算权重，样本量少的类别所对应的样本权重会高。如果你的样本类别分布没有明显的偏倚，则可以不管这个参数，默认是"None"    
&emsp;&emsp;对于回归树，没有这个参数   

---

3、splitter：特征划分点选择标准   
&emsp;&emsp;默认使用best是在特征的所有划分点中找出最优的划分点，可取值random，即随机的在部分划分点中找局部最优的划分点。best适合样本量不大的时候，如果样本数据量非常大，此时决策树构建推荐random     

4、max_features：划分时考虑的最大特征数    
&emsp;&emsp;可以使用多种类型的值，默认是"None",意味着划分时考虑所有的属性；如果是`$log2$`意味着划分时最多考虑`$log_2N$`个属性；如果是`$sqrt$`或者`$auto$`意味着划分时最多考虑`$\sqrt{N}$`个属性。如果是整数，代表考虑的属性绝对数。如果是浮点数，代表考虑特征百分比，即考虑（百分比xN）取整后的属性个数。其中N为样本总属性个数。    
&emsp;&emsp;一般来说，如果样本属性数不多，比如小于50，我们用默认的None就可以了，如果属性个数非常多，可以设置这个参数来控制划分时考虑的最大属性个数，以控制决策树的生成时间。

5、max_depth：决策树最大深    
&emsp;&emsp;决策树的最大深度，默认可以不输入，如果不输入的话，不会限制子树的深度。数据少或者属性少的时候可以不管这个值。如果模型样本量多，属性也多的情况下，推荐限制这个最大深度，具体的取值取决于数据的分布。常用的可以取值10-100之间。    

6、min_samples_split：内部节点再划分所需最小样本数    
&emsp;&emsp;这个值限制了子树继续划分的条件，如果某节点的样本数少于min_samples_split，则不会继续再尝试选择最优特征来进行划分，默认是2。如果样本量不大，不需要管这个值。如果样本量数量级非常大，则推荐增大这个值。我之前的一个项目例子，有大概10万样本，建立决策树时，我选择了min_samples_split=10。   

7、min_samples_leaf：叶子节点最少样本数   
&emsp;&emsp;这个值限制了叶子节点最少的样本数，如果某叶子节点数目小于样本数，则会和兄弟节点一起被剪枝，默认是1。可以输入最少的样本数的整数，或者最少样本数占样本总数的百分比。如果样本量不大，不需要管这个值。如果样本量数量级非常大，则推荐增大这个值。之前的10万样本项目使用min_samples_leaf的值为5，仅供参考。

8、min_weight_fraction_leaf：叶子节点最小的样本权重和   
&emsp;&emsp;这个值限制了叶子节点所有样本权重和的最小值，如果小于这个值，则会和兄弟节点一起被剪枝。 默认是0，就是不考虑权重问题。一般来说，如果我们有较多样本有缺失值，或者分类树样本的分布类别偏差很大，就会引入样本权重。   

9、max_leaf_nodes：最大叶子节点数  
&emsp;&emsp;通过限制最大叶子节点数，可以防止过拟合，默认是"None”，即不限制最大的叶子节点数。如果加了限制，算法会建立在最大叶子节点数内最优的决策树。如果特征不多，可以不考虑这个值，但是如果特征分成多的话，可以加以限制，具体的值可以通过交叉验证得到。   

10、min_impurity_split：节点划分最小不纯度   
&emsp;&emsp;这个值限制了决策树的增长，如果某节点的不纯度(基尼系数，信息增益，均方差，绝对差)小于这个阈值，则该节点不再生成子节点。即为叶子节点 。

11、presort：数据是否预排序   
&emsp;&emsp;这个值是布尔值，默认是False不排序。一般来说，如果样本量少或者限制了一个深度很小的决策树，设置为true可以让划分点选择更加快，决策树建立的更加快。如果样本量太大的话，反而没有什么好处。问题是样本量少的时候，速度本来就不慢。所以这个值一般懒得理它就可以了。   

在调参时的注意点有：    
&emsp;&emsp;1）当样本少数量但是样本特征非常多的时候，决策树很容易过拟合，一般来说，样本数比特征数多一些会比较容易建立健壮的模型    
&emsp;&emsp;2）如果样本数量少但是样本特征非常多，在拟合决策树模型前，推荐先做维度规约，比如主成分分析（PCA），特征选择（Losso）或者独立成分分析（PCA）。这样特征的维度会大大减小。再来拟合决策树模型效果会好。    
&emsp;&emsp;3）推荐多用决策树的可视化，同时先限制决策树的深度（比如最多3层），这样可以先观察下生成的决策树里数据的初步拟合情况，然后再决定是否要增加深度。   
&emsp;&emsp;4）在训练模型前，注意观察样本的类别情况（主要指分类树），如果类别分布非常不均匀，就要考虑用class_weight来限制模型过于偏向样本多的类别。   
&emsp;&emsp;5）决策树的数组使用的是numpy的float32类型，如果训练数据不是这样的格式，算法会先做copy再运行。    
&emsp;&emsp;6）如果输入的样本矩阵是稀疏的，推荐在拟合前调用csc\_matrix稀疏化，在预测前调用csr_matrix稀疏化。